import telebot
import random

bot = telebot.TeleBot("")

@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.reply_to(message, "–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π Telegram –±–æ—Ç. –ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å!")

@bot.message_handler(commands=['hello'])
def send_hello(message):
    bot.reply_to(message, "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?")

@bot.message_handler(commands=['heh'])
def send_heh(message):
    count_heh = int(message.text.split()[1]) if len(message.text.split()) > 1 else 5
    bot.reply_to(message, "he" * count_heh)

@bot.message_handler(commands=['bye'])
def send_bye(message):
    bot.reply_to(message, "–ü–æ–∫–∞! –£–¥–∞—á–∏!")

@bot.message_handler(commands=['calc'])
def calculator(message):
    try:
        parts = message.text.split()
        if len(parts) != 4:
            bot.reply_to(message, "–ò—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç: /calc —á–∏—Å–ª–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä —á–∏—Å–ª–æ")
            return
        num1 = float(parts[1])
        op = parts[2]
        num2 = float(parts[3])
        result = None
        if op == '+':
            result = num1 + num2
        elif op == '-':
            result = num1 - num2
        elif op == '*':
            result = num1 * num2
        elif op == '/':
            if num2 == 0:
                bot.reply_to(message, "–û—à–∏–±–∫–∞: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 0")
                return
            result = num1 / num2
        else:
            bot.reply_to(message, "–û–ø–µ—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å +, -, *, /")
            return

        bot.reply_to(message, f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    except ValueError:
        bot.reply_to(message, "–û—à–∏–±–∫–∞! –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.")

@bot.message_handler(commands=['random'])
def send_random(message):
    number = random.randint(1, 100)
    bot.reply_to(message, f"–¢–≤–æ–µ —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ: {number}")

@bot.message_handler(commands=['repeat'])
def repeat_msg(message):
    parts = message.text.split(maxsplit=2)
    if len(parts) < 3 or not parts[1].isdigit():
        bot.reply_to(message, "–ò—Å–ø–æ–ª—å–∑—É–π /repeat —á–∏—Å–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ")
        return
    count = int(parts[1])
    text = parts[2]
    bot.reply_to(message, text * count)

@bot.message_handler(commands=['info'])
def send_info(message):
    info_text = (
        "–Ø –ø—Ä–æ—Å—Ç–æ–π Telegram –±–æ—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥.\n"
        "–ö–æ–º–∞–Ω–¥—ã:\n"
        "/calc ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (+, -, *, /)\n"
        "/random ‚Äî —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100\n"
        "/repeat ‚Äî –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑\n"
        "/info ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–æ –º–Ω–µ\n"
    )
    bot.reply_to(message, info_text)

@bot.message_handler(func=lambda message: True)
def send_reaction(message):
    emo = ["\U0001F525", "\U0001F917", "\U0001F60E"]  # or use ["üî•", "ü§ó", "üòé"]
    bot.set_message_reaction(message.chat.id, message.id, [ReactionTypeEmoji(random.choice(emo))], is_big=False)

@bot.message_handler(func=lambda message: True)
def echo_all(message):
    bot.reply_to(message, message.text)

print('–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω')
bot.polling()
